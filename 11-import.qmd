---
title: "Section 11: Merging"
author: "Matt Higham"
format: 
  html:
    embed-resources: true
---

```{r}
library(tidyverse)
library(here)
atp_2019 <- read_csv(here("data/atp_matches_2019.csv"))
atp_2018 <- read_csv(here("data/atp_matches_2018.csv"))
atp_2019
atp_2018

## atp_df <- bind_rows(atp_2018, atp_2019)

atp_2018 <- read_csv(here("data/atp_matches_2018.csv"),
                     col_types = cols(winner_seed = col_character(),
                                      loser_seed = col_character()))

atp_df <- bind_rows(atp_2018, atp_2019)
atp_df
```

```{r}
df_test2a <- tibble(xvar = c(1, 2))
df_test2b <- tibble(xvar = c(1, 2), y = c(5, 1))
df_test2a
df_test2b
bind_rows(df_test2a, df_test2b)
## the y variable that is missing from the first df
## gets filled in with NAs when we stack rows
```

```{r}
df_test1a <- tibble(xvar = c(1, 2), yvar = c(5, 1))
df_test1b <- tibble(x = c(1, 2), y = c(5, 1))
bind_cols(df_test1a, df_test1b)
```

```{r}
df_test1a <- tibble(xvar = c(1, 2), yvar = c(5, 1)) |>
  rename(x = xvar, 
         y = yvar)
df_test1b <- tibble(x = c(1, 2), y = c(5, 1))
bind_rows(df_test1a, df_test1b)
```

Exercise 3.

a. 5 rows (the 3 rows with the matching key plus the 2 rows in df1 that do not have a match in df2)

b. 6 rows

c. 8 rows (the 3 matches plus the 2 non-matching rows in df1 pus the 3 non-matching rows in df2).

d. 3 rows (A, C, E)

e. 3 rows

f. 2 rows (B and F do not have matching keys in df2).

## Your Turn 

Your Turn 1.

a. True

b. True (venn diagram shows that the center shaded area would never be larger than the center + the left area).

c. False (duplicates would create a larger data frame for the left_join. And there are other reasons).

Your Turn 2.

a. 6 rows 

b. 8 rows (2 A's, 1 B, 2 C'S, 3 D'S)

c. 10 rows (4 matches, 2 f's from df1 that are not in df2, and the 1 b and 3 d's from df2 that are not in df1).

d. 4 rows (only the 2 a's and the 2 c's).

e. 4 rows (filters out the 2 f's)

f. 2 rows (keeps the 2 f's)